(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["role"],{"4eeb":function(e){e.exports=JSON.parse('[{"label":"角色","prop":"role","align":"center","headerAlign":"center","width":120}]')},"6c35":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("ch-table",{attrs:{"table-data":e.tableData,"row-options":e.rowOptions}},[n("template",{slot:"other"},[n("el-table-column",{attrs:{label:"权限",prop:"routes","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(" "+e._s(e._f("filterRoutes")(t.row.routes))+" ")])]}}])})],1),n("template",{slot:"other"},[n("el-table-column",{attrs:{label:"操作",width:"100","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.handleClick(t.row)}}},[e._v(" 编辑 ")])]}}])})],1)],2),n("el-dialog",{attrs:{title:"编辑",visible:e.dialogVisible,width:"900px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-tree",{ref:"tree",attrs:{data:e.routesData,props:e.defaultProps,"default-checked-keys":e.defaultCheck,"node-key":"name","show-checkbox":"",accordion:""}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)],1)],1)},a=[],o=n("a34a"),i=n.n(o),l=n("b775"),s=function(){var e="/getRoleRoutesList";return Object(l["a"])(e)},c=n("4eeb"),u=n("e9a4");function f(e){return b(e)||h(e)||m(e)||d()}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function b(e){if(Array.isArray(e))return v(e)}function p(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=m(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,o=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw a}}}}function m(e,t){if(e){if("string"===typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t,n,r,a,o,i){try{var l=e[o](i),s=l.value}catch(c){return void n(c)}l.done?t(s):Promise.resolve(s).then(r,a)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){y(o,r,a,i,l,"next",e)}function l(e){y(o,r,a,i,l,"throw",e)}i(void 0)}))}}var w={name:"Role",data:function(){return{dialogVisible:!1,rowOptions:c,tableData:[],defaultProps:{children:"children",label:"label"},routesData:[],defaultCheck:[]}},filters:{filterRoutes:function(e){return JSON.stringify(e)}},created:function(){this.getRoleRoutesList()},methods:{getRoleRoutesList:function(){var e=this;return g(i.a.mark((function t(){var n;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s();case 2:n=t.sent,e.tableData=n.data;case 4:case"end":return t.stop()}}),t)})))()},handleClick:function(e){this.defaultCheck=[],this.routesData=this.$ls.get(u["b"]).filter((function(e){return!e.hidden})),this.getRoutesData(this.routesData),this.getDefaultCheck(e.routes),this.dialogVisible=!0},getRoutesData:function(e){var t,n=p(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.meta?(r.label=r.meta.label,r.children&&this.getRoutesData(r.children)):(r.name=r.children[0].name,r.label=r.children[0].meta.label,r.children=[],"home"===r.name&&(r.disabled=!0))}}catch(a){n.e(a)}finally{n.f()}},getDefaultCheck:function(e){var t=this;e.map((function(e){e.meta?e.children?t.getDefaultCheck(e.children):t.defaultCheck.push(e.name):t.defaultCheck.push(e.children[0].name)}))},confirm:function(){var e=this.$refs.tree.getCheckedKeys(),t=this.$refs.tree.getHalfCheckedKeys(),n=[].concat(f(e),f(t)),r=this.$ls.get(u["b"]);this.editRoutes(r,n),console.log(r)},editRoutes:function(e,t){for(var n=e.length-1;n>=0;n--)if(e[n].hidden)e.splice(n,1);else{var r=!1;r=e[n].meta?-1!==t.indexOf(e[n].name):-1!==t.indexOf(e[n].children[0].name),r?e[n].name&&e[n].children&&this.editRoutes(e[n].children,t):e.splice(n,1)}}}},k=w,R=n("2877"),C=Object(R["a"])(k,r,a,!1,null,null,null);t["default"]=C.exports}}]);